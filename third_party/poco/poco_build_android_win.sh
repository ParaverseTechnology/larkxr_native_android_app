BUILD_ABI_ARMV7=armeabi-v7a
BUILD_ABI_AMR64=arm64-v8a
BUILD_ABI_X86_64=x86_64
BUILD_ABI_X86=x86

BUILD_TYPE_DEBUG=Debug
BUILD_TYPE_RELEASE=Release

POCO_SOURCE=E:/work/libs/poco-1.10.1-all
POCO_OUTPUT_BASE=$POCO_SOURCE/build_android
POCO_OUTPUT_ARMV7=$POCO_OUTPUT_BASE/$BUILD_ABI_ARMV7

CMAKE_BIN=E:/android/sdk/cmake/3.10.2.4988404/bin/cmake
NINJA_BIN=E:/android/sdk/cmake/3.10.2.4988404/bin/ninja

CMAKE_MAKE_PROGRAM=E:/android/sdk/cmake/3.10.2.4988404/bin/ninja
CMAKE_TOOLCHAIN_FILE=E:/android/sdk/ndk-bundle/build/cmake/android.toolchain.cmake
ANDROID_NATIVE_API_LEVEL=16
GEN_TOOL='Ninja'

OPENSSL_SSL_LIBRARY_BASE=E:/work/libs/OpenSSL-for-Android-Prebuilt/openssl-1.1.1d-clang
OPENSSL_INCLUDE_DIR=$OPENSSL_SSL_LIBRARY_BASE/include
OPENSSL_SSL_LIBRARY_ARMV7=$OPENSSL_SSL_LIBRARY_BASE/$BUILD_ABI_ARMV7/lib/libssl.a 
OPENSSL_CRYPTO_LIBRARY_ARMV7=$OPENSSL_SSL_LIBRARY_BASE/$BUILD_ABI_ARMV7/lib/libcrypto.a

echo "Start Build Android $BUILD_ABI_ARMV7"


# $CMAKE_BIN -H$POCO_SOURCE -B$POCO_OUTPUT_ARMV7 -G$GEN_TOOL -DCMAKE_BUILD_TYPE=$BUILD_TYPE_DEBUG \
# -DOPENSSL_SSL_LIBRARY=$OPENSSL_SSL_LIBRARY_ARMV7 -DOPENSSL_CRYPTO_LIBRARY=$OPENSSL_CRYPTO_LIBRARY_ARMV7 \
# -DOPENSSL_INCLUDE_DIR=$OPENSSL_INCLUDE_DIR \
# -DCMAKE_MAKE_PROGRAM=$CMAKE_MAKE_PROGRAM -DCMAKE_TOOLCHAIN_FILE=$CMAKE_TOOLCHAIN_FILE \
# -DANDROID_NATIVE_API_LEVEL=$ANDROID_NATIVE_API_LEVEL -DANDROID_ABI=$BUILD_ABI_ARMV7

# $NINJA_BIN -C $POCO_OUTPUT_ARMV7

# $1 abi $2 build type
build() {
    $CMAKE_BIN -H$POCO_SOURCE -B$POCO_OUTPUT_BASE/$1 -G$GEN_TOOL -DCMAKE_BUILD_TYPE=$2 \
    -DOPENSSL_SSL_LIBRARY=$OPENSSL_SSL_LIBRARY_BASE/$1/lib/libssl.a -DOPENSSL_CRYPTO_LIBRARY=$OPENSSL_SSL_LIBRARY_BASE/$1/lib/libcrypto.a \
    -DOPENSSL_INCLUDE_DIR=$OPENSSL_INCLUDE_DIR \
    -DCMAKE_MAKE_PROGRAM=$CMAKE_MAKE_PROGRAM -DCMAKE_TOOLCHAIN_FILE=$CMAKE_TOOLCHAIN_FILE \
    -DANDROID_NATIVE_API_LEVEL=$ANDROID_NATIVE_API_LEVEL -DANDROID_ABI=$1

    $NINJA_BIN -C $POCO_OUTPUT_BASE/$1/
}

build $BUILD_ABI_ARMV7 $BUILD_TYPE_DEBUG
build $BUILD_ABI_ARMV7 $BUILD_TYPE_RELEASE

build $BUILD_ABI_AMR64 $BUILD_TYPE_DEBUG
build $BUILD_ABI_AMR64 $BUILD_TYPE_RELEASE

build $BUILD_ABI_X86_64 $BUILD_TYPE_DEBUG
build $BUILD_ABI_X86_64 $BUILD_TYPE_RELEASE

build $BUILD_ABI_X86 $BUILD_TYPE_DEBUG
build $BUILD_ABI_X86 $BUILD_TYPE_RELEASE